<head>
    <meta name="encoding" value="utf-8">
    <script type="text/javascript" src="js/jquery-3.2.0.min.js"></script>
    <link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
</head>
<body>
    <div class="container">
        <div class="row" >
            <h4>Arduino Echo</h4>
            <div class="col-sm-12">
                <form>
                  <div class="form-group">
                    <label for="formGroupExampleInput">Input Stream:</label>
                    <input type="text" class="form-control" id="instr">
                  </div>
                  <button id="sum" type="button" class="btn btn-primary">Sum</button>
                  <button id="prod" type="button" class="btn btn-primary">Product</button>
                  <button id="mean" type="button" class="btn btn-primary">Mean</button>
                  <div class="form-group">
                    <label for="formGroupExampleInput2">Output Stream:</label>
                    <div id="outdiv"></div>
                  </div>
                </form>                
            </div>
        </div>
    </div>
<script type="text/javascript">
    $(document).ready(function(){
        setInterval(function(){
            //poll the arduino's serial port for a response once every .5 seconds
            //TODO: Move this to the python module - it will be a lot of work
            external.echo(function(py_text,py_callback){
                console.log(KEY_CODES);
                if(py_text != KEY_CODES.EMPTY_BUFFSTR)
                    $('#outdiv').append('<p>'+py_text+'</p>')
            });
        },500);

        $('#sum').click(function(){
            external.send($('#instr').val()+KEY_CODES.SUM + KEY_CODES.CLEAR);
        });
        $('#prod').click(function(){
            external.send($('#instr').val()+KEY_CODES.PROD+ KEY_CODES.CLEAR);
        });
        $('#mean').click(function(){
            external.send($('#instr').val()+KEY_CODES.MEAN+ KEY_CODES.CLEAR);
        });
    });
</script>
</body>
